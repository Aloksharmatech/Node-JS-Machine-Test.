<div
  class="min-h-screen flex flex-col items-center justify-start bg-gray-50 p-6 space-y-8"
>
  <!-- Add Product Form -->
  <form
    class="bg-white p-8 rounded-3xl shadow-xl w-full max-w-sm hover:shadow-2xl transition-all duration-300"
    (ngSubmit)="onSubmit()"
    #productForm="ngForm"
  >
    <h2
      class="text-3xl font-extrabold text-gray-800 mb-6 text-center tracking-wide"
    >
      Add Product
    </h2>

    <!-- Product Name -->
    <div class="mb-6">
      <label for="productName" class="block text-gray-700 font-medium mb-2"
        >Product Name</label
      >
      <input
        type="text"
        id="productName"
        name="ProductName"
        placeholder="Enter product name"
        class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition placeholder-gray-400"
        required
        [(ngModel)]="newProduct.ProductName"
      />
    </div>

    <!-- Category Select -->
    <div class="mb-6">
      <label for="category" class="block text-gray-700 font-medium mb-2"
        >Category</label
      >
      <div class="relative">
        <select
          id="category"
          name="CategoryId"
          class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition shadow-sm appearance-none pr-10 bg-white cursor-pointer text-gray-400"
          required
          [(ngModel)]="newProduct.CategoryId"
          [ngClass]="{ 'text-gray-700': newProduct.CategoryId }"
        >
          <option value="" disabled selected>Select Category</option>
          <option *ngFor="let cat of categories" [value]="cat.CategoryId">
            {{ cat.CategoryName }}
          </option>
        </select>
        <!-- Dropdown icon -->
        <svg
          class="pointer-events-none absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 9l-7 7-7-7"
          />
        </svg>
      </div>
    </div>

    <!-- Price -->
    <div class="mb-6">
      <label for="Price" class="block text-gray-700 font-medium mb-2"
        >Price</label
      >
      <input
        type="number"
        id="Price"
        name="Price"
        placeholder="Enter product Price"
        class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition placeholder-gray-400"
        required
        [(ngModel)]="newProduct.Price"
      />
    </div>

    <button
      type="submit"
      class="w-full bg-blue-600 text-white font-semibold py-3 rounded-2xl hover:bg-blue-700 transition-all shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
    >
      Add Product
    </button>
  </form>

  <!-- Products Table -->
  <div
    class="bg-white p-8 rounded-3xl shadow-xl w-full max-w-5xl hover:shadow-2xl transition-all duration-300"
  >
    <h2
      class="text-3xl font-extrabold text-gray-800 mb-6 text-center tracking-wide"
    >
      Products List
    </h2>

    <div class="overflow-x-auto">
      <table class="min-w-full border-collapse table-auto text-gray-700">
        <thead class="bg-gray-800 text-white rounded-t-3xl">
          <tr>
            <th class="py-3 px-6 text-center font-medium tracking-wide">No</th>
            <th class="py-3 px-6 text-left font-medium tracking-wide">
              Product Name
            </th>
            <th class="py-3 px-6 text-left font-medium tracking-wide">
              Category
            </th>
            <th class="py-3 px-6 text-center font-medium tracking-wide">
              Price
            </th>
            <th class="py-3 px-6 text-center font-medium tracking-wide">
              Actions
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <tr
            *ngFor="let prod of products; let i = index"
            class="hover:bg-gray-100 transition-all duration-200"
          >
            <td class="py-3 px-6 text-center font-medium">{{ i + 1 }}</td>
            <td class="py-3 px-6">{{ prod.ProductName }}</td>
            <td class="py-3 px-6">{{ getCategoryName(prod.CategoryId) }}</td>
            <td class="py-3 px-6 text-center">{{ prod.Price | currency }}</td>
            <td class="py-3 px-6 text-center flex justify-center space-x-3">
              <!-- Edit Button -->
              <button
                class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 shadow-sm transition-all flex items-center space-x-2"
                (click)="openEditModal(prod)"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15.232 5.232l3.536 3.536M16 3l5 5L7 22H2v-5L16 3z"
                  />
                </svg>
                <span>Edit</span>
              </button>

              <!-- Delete Button -->
              <button
                class="bg-gray-800 text-white px-5 py-2 rounded-lg hover:bg-gray-900 shadow-sm transition-all flex items-center space-x-2"
                (click)="deleteProduct(prod.ProductId!)"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 7L5 7M10 7v12m4-12v12M4 7h16M6 7V4h12v3"
                  />
                </svg>
                <span>Delete</span>
              </button>
            </td>
          </tr>
          <tr *ngIf="products.length === 0">
            <td colspan="5" class="text-center py-6 text-gray-400 italic">
              No products found.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Edit Product Modal -->
<div
  *ngIf="isEditModalOpen"
  class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50"
>
  <div
    class="bg-white rounded-3xl shadow-2xl w-full max-w-md p-6 relative animate-fade-in"
  >
    <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center tracking-wide">
      Edit Product
    </h3>

    <div class="mb-4">
      <label class="block text-gray-700 mb-2">Product Name</label>
      <input
        type="text"
        placeholder="New product name"
        class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4 transition placeholder-gray-400"
        [(ngModel)]="editingProduct.ProductName"
      />
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 mb-2">Category</label>
      <select
        class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4 transition"
        [(ngModel)]="editingProduct.CategoryId"
      >
        <option *ngFor="let cat of categories" [value]="cat.CategoryId">
          {{ cat.CategoryName }}
        </option>
      </select>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 mb-2">Price</label>
      <input
        type="number"
        placeholder="New Price"
        class="w-full px-5 py-3 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4 transition"
        [(ngModel)]="editingProduct.Price"
      />
    </div>

    <div class="flex justify-end space-x-4">
      <button
        class="bg-gray-400 text-white px-5 py-2 rounded-2xl hover:bg-gray-500 transition-all"
        (click)="closeModal()"
      >
        Cancel
      </button>
      <button
        class="bg-blue-600 text-white px-5 py-2 rounded-2xl hover:bg-blue-700 transition-all"
        (click)="saveEdit()"
      >
        Save
      </button>
    </div>
  </div>
</div>
